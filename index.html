<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>my desk</title>
		<link rel="stylesheet" type="text/css" href="css/liteweight.min.css" />
		<link rel="stylesheet" type="text/css" href="css/style.css" />
	</head>
	<body>
		<div class="desk-background">
			<h1 class="desk-title">Matt's Desk</h1>
			<h1 class="desk-subtitle">just scroll down</h1>
		</div>
		<div class="desk-body">
			<div class="desk-spacer"></div>
			<div class="layered-cards" id="stack"></div>
			<div class="desk-spacer"></div>
		</div>
		<script>
			fetch('./desk.json')
		  .then(function(response) {
		    return response.json();
		  })
		  .then(function(data) {
				console.log(data)
				for (book in data.books){
					var bookObj = data.books[book];
					var fstring = bookObj.fiction ? "Fiction" : "Non-fiction";
					var string = '<div class="card card-bordered-primary"><h1 class="title title-1"><i>' + bookObj.title + '</i></h1><h2>by ' + bookObj.author + '</h2><p><b>' + fstring + ' | ' + bookObj.genre + '</b></p><p>'+ bookObj.description + '</p></div>';
					document.getElementById("stack").innerHTML = document.getElementById("stack").innerHTML += string;
				}
				var parents = document.getElementsByClassName('layered-cards');
				Array.from(parents).forEach(function(parent){
					var children = parent.getElementsByTagName('div');
					for (i = 0; i < Array.from(children).length; i++){
						children[i].style.zIndex = 10 - i;
					}
				})
		  });

		</script>
	</body>
</html>
